unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ComCtrls;

type
  TForm1 = class(TForm)
    TreeView1: TTreeView;
    Edit1: TEdit;
    Button1: TButton;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    procedure Button1Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

  TData = Integer; { Тип указателя на узел. }
  TPNode = ^TNode; { Тип узла дерева. }

  TNode = record
    Data: TData; { Ключ (основные данные) узла дерева. }
    PLeft, PRight: TPNode; { Указатели на левый и правый узел. }
  end;

var
  Form1: TForm1;
  NodeData: integer;
  TreeHead: integer;
  TreeNode: TTreeNode;
  CheckAdd: boolean;
  lab1, lab2, lab3: Integer;
  PTree : TPNode;

implementation

{$R *.dfm}



procedure AddNode(var aPNode: TPNode; const aData: TData);
begin
  if aPNode = nil then { Вставка узла. }
  begin
    New(aPNode); { Выделяем память для узла. }
    aPNode^.Data := aData; { Записываем в узел значение ключа. }
    aPNode^.PLeft := nil; { Обнуляем указатель на левого потомка. }
    aPNode^.PRight := nil; { Обнуляем указатель на правого потомка. }
    CheckAdd := False;
    TreeHead := aData;
  end

  else if aData <= aPNode^.Data then { Поиск места вставки в левой ветви. }
  begin
    AddNode(aPNode^.PLeft, aData);
    NodeData := aPNode^.PLeft.Data;
  end

  else if aData > aPNode^.Data then { Поиск места вставки в правой ветви. }
  begin
    AddNode(aPNode^.PRight, aData);
    NodeData := aPNode^.PRight.Data;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  aPNode: TPNode ;
  Data: TData;

  tryAdd: Integer;
begin
  Data := strtoint(Edit1.text);
  AddNode(PTree, Data);

  if CheckAdd = False then
    begin
      TreeView1.Items.Add(TreeNode, inttostr(TreeHead));
      CheckAdd := True;
      showMessage('1')
    end
  else
    begin
      showMessage('2');
    end;

end;

procedure TForm1.FormShow(Sender: TObject);
begin
   PTree := nil;
end;

end.
